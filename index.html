<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Valentine's Memory Game</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .perspective {
      perspective: 1000px;
    }
    .transform-style-3d {
      transform-style: preserve-3d;
    }
    .backface-hidden {
      backface-visibility: hidden;
    }
    .rotate-y-180 {
      transform: rotateY(180deg);
    }
    @keyframes fall {
      to {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }
    .animate-fall {
      animation: fall 3s linear forwards;
    }
    .animate-float {
      animation: float 2s ease-in-out infinite;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const ValentineGame = () => {
      const [cards, setCards] = useState([]);
      const [flipped, setFlipped] = useState([]);
      const [matched, setMatched] = useState([]);
      const [gameComplete, setGameComplete] = useState(false);
      const [showQuestion, setShowQuestion] = useState(false);
      const [showCelebration, setShowCelebration] = useState(false);
      const [noButtonPos, setNoButtonPos] = useState({ x: 50, y: 50 });
      const [noButtonSpeed, setNoButtonSpeed] = useState(1);
      const [confetti, setConfetti] = useState([]);

      const cardPairs = [
        { symbol: 'üåπ', note: 'You have the most beautiful smile' },
        { symbol: 'üíï', note: 'My beautiful baby is dark and chic, and oh she loves a rose' },
        { symbol: '‚ú®', note: "Can't wait to travel the world with you" },
        { symbol: 'üç´', note: 'My Bellezza Oscura' },
        { symbol: 'üíñ', note: "Can't wait to see you" },
        { symbol: 'üåü', note: 'You are my epitome of beauty baby girl' },
        { symbol: 'üíù', note: 'I LOVE YOU' }
      ];

      useEffect(() => {
        initializeGame();
      }, []);

      const initializeGame = () => {
        const shuffled = [...cardPairs, ...cardPairs]
          .map((card, index) => ({ ...card, id: index }))
          .sort(() => Math.random() - 0.5);
        setCards(shuffled);
      };

      const handleCardClick = (index) => {
        if (flipped.length === 2 || flipped.includes(index) || matched.includes(index)) return;

        const newFlipped = [...flipped, index];
        setFlipped(newFlipped);

        if (newFlipped.length === 2) {
          const [first, second] = newFlipped;
          if (cards[first].symbol === cards[second].symbol) {
            setTimeout(() => {
              setMatched([...matched, first, second]);
              setFlipped([]);
            }, 600);
          } else {
            setTimeout(() => setFlipped([]), 1000);
          }
        }
      };

      useEffect(() => {
        if (matched.length === cards.length && cards.length > 0) {
          setTimeout(() => setGameComplete(true), 500);
          setTimeout(() => setShowQuestion(true), 1000);
        }
      }, [matched, cards]);

      const handleNoButtonHover = () => {
        const newX = Math.random() * 70 + 5;
        const newY = Math.random() * 70 + 5;
        setNoButtonPos({ x: newX, y: newY });
        setNoButtonSpeed(prev => prev * 1.3);
      };

      const handleYesClick = () => {
        setShowCelebration(true);
        const confettiArray = Array.from({ length: 100 }, (_, i) => ({
          id: i,
          x: Math.random() * 100,
          y: -10,
          rotation: Math.random() * 360,
          color: ['#ff69b4', '#ff1493', '#ffd700', '#ff69b4', '#da70d6'][Math.floor(Math.random() * 5)],
          delay: Math.random() * 0.3
        }));
        setConfetti(confettiArray);
      };

      if (showCelebration) {
        return (
          <div className="min-h-screen flex items-center justify-center relative overflow-hidden bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900" style={{ fontFamily: 'Inter, sans-serif' }}>
            {confetti.map(c => (
              <div
                key={c.id}
                className="absolute w-2 h-2 animate-fall"
                style={{
                  left: `${c.x}%`,
                  top: `${c.y}%`,
                  backgroundColor: c.color,
                  transform: `rotate(${c.rotation}deg)`,
                  animationDelay: `${c.delay}s`
                }}
              />
            ))}
            <div className="text-center z-10 px-4">
              <h1 className="text-4xl md:text-6xl font-semibold text-white mb-8 tracking-tight" style={{ letterSpacing: '-0.02em' }}>
                Yayy, I love you so much ‚ù§Ô∏è
              </h1>
              <div className="flex gap-4 justify-center">
                {['üíï', 'üíñ', 'üíù', 'üíó', 'üíì'].map((heart, i) => (
                  <div
                    key={i}
                    className="text-4xl animate-float"
                    style={{ animationDelay: `${i * 0.2}s` }}
                  >
                    {heart}
                  </div>
                ))}
              </div>
            </div>
          </div>
        );
      }

      if (showQuestion) {
        return (
          <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4" style={{ fontFamily: 'Inter, sans-serif' }}>
            <div className="bg-white/5 backdrop-blur-xl rounded-3xl p-8 md:p-12 max-w-xl w-full border border-white/10 shadow-2xl">
              <h1 className="text-3xl md:text-5xl font-semibold text-white text-center mb-12 tracking-tight" style={{ letterSpacing: '-0.02em' }}>
                Sally, will you be my Valentine? ‚ù§Ô∏è
              </h1>
              <div className="flex flex-col md:flex-row gap-6 items-center justify-center relative" style={{ minHeight: '200px' }}>
                <button
                  onClick={handleYesClick}
                  className="bg-gradient-to-r from-pink-500 to-rose-500 text-white px-10 py-3 rounded-full text-xl font-medium hover:scale-105 transition-all shadow-lg hover:shadow-pink-500/30"
                >
                  YES üíï
                </button>
                <div className="relative w-full md:w-auto">
                  <button
                    onMouseEnter={handleNoButtonHover}
                    onTouchStart={handleNoButtonHover}
                    onClick={handleNoButtonHover}
                    className="bg-gradient-to-r from-gray-500 to-gray-600 text-white px-10 py-3 rounded-full text-xl font-medium transition-all shadow-lg absolute"
                    style={{
                      left: `${noButtonPos.x}%`,
                      top: `${noButtonPos.y}%`,
                      transition: `all ${0.3 / noButtonSpeed}s ease-out`
                    }}
                  >
                    NO ü§î
                  </button>
                  <p className="text-pink-300 text-sm text-center mt-2 italic">
                    Curious? Click me!
                  </p>
                </div>
              </div>
            </div>
          </div>
        );
      }

      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6 md:p-12 flex items-center justify-center" style={{ fontFamily: 'Inter, system-ui, sans-serif' }}>
          <div className="max-w-2xl mx-auto w-full">
            <h1 className="text-2xl md:text-3xl font-light text-white text-center mb-10 tracking-wide">
              Memory Matching Game
            </h1>
            <div className="grid grid-cols-4 md:grid-cols-7 gap-2 md:gap-3 max-w-xl mx-auto">
              {cards.map((card, index) => {
                const isFlipped = flipped.includes(index) || matched.includes(index);
                const isMatched = matched.includes(index);
                
                return (
                  <div
                    key={card.id}
                    onClick={() => handleCardClick(index)}
                    className="aspect-square cursor-pointer perspective"
                  >
                    <div
                      className={`relative w-full h-full transition-all duration-500 transform-style-3d ${
                        isFlipped ? 'rotate-y-180' : ''
                      }`}
                    >
                      <div className="absolute w-full h-full backface-hidden bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl flex items-center justify-center shadow-lg hover:shadow-pink-500/30 transition-shadow">
                        <div className="text-2xl opacity-60">‚ùì</div>
                      </div>
                      
                      <div className={`absolute w-full h-full backface-hidden rotate-y-180 rounded-xl flex flex-col items-center justify-center p-2 shadow-lg transition-all ${
                        isMatched 
                          ? 'bg-gradient-to-br from-rose-500 to-pink-600 shadow-pink-500/50' 
                          : 'bg-white'
                      }`}>
                        <div className="text-2xl mb-1">{card.symbol}</div>
                        {isMatched && (
                          <p className="text-[0.5rem] md:text-[0.6rem] text-center font-medium text-white leading-tight px-1">
                            {card.note}
                          </p>
                        )}
                      </div>
                    </div>
                  </div>
                );
              })}
            </div>
            {gameComplete && (
              <div className="text-center mt-8 text-lg font-light text-white/90 tracking-wide">
                All pairs matched üéâ
              </div>
            )}
          </div>
        </div>
      );
    };

    ReactDOM.render(<ValentineGame />, document.getElementById('root'));
  </script>
</body>
</html>
